//0 empty, 1 wall, 2 coin

let world_1 =[
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1],
    [1,2,1,2,1,2,1,2,1,2,2,2,1,2,1,1,1,1,1,2,1,2,2,2,1,2,1,2,1,2,1,2,1],
    [1,2,1,2,2,2,1,2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,1,2,2,2,1,2,1],
    [1,2,1,1,1,2,1,2,1,2,1,2,1,2,2,2,2,2,2,2,1,2,1,2,1,2,1,2,1,1,1,2,1],
    [1,2,2,2,2,2,1,2,2,2,1,2,2,2,1,1,2,1,1,2,2,2,1,2,2,2,1,2,2,2,2,2,1],
    [1,2,1,2,1,2,2,2,1,2,2,2,1,2,1,0,0,0,1,2,1,2,2,2,1,2,2,2,1,2,1,2,1],
    [1,2,1,2,1,2,2,2,1,1,1,1,1,2,2,0,0,0,2,2,1,1,1,1,1,2,2,2,1,2,1,2,1],
    [1,2,1,2,1,2,2,2,1,2,2,2,1,2,1,0,0,0,1,2,1,2,2,2,1,2,2,2,1,2,1,2,1],
    [1,2,2,2,2,2,1,2,2,2,1,2,2,2,1,1,2,1,1,2,2,2,1,2,2,2,1,2,2,2,2,2,1],
    [1,2,1,1,1,2,1,2,1,2,1,2,1,2,2,2,2,2,2,2,1,2,1,2,1,2,1,2,1,1,1,2,1],
    [1,2,1,2,2,2,1,2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,1,2,2,2,1,2,1],
    [1,2,1,2,1,2,1,2,1,2,2,2,1,2,1,1,1,1,1,2,1,2,2,2,1,2,1,2,1,2,1,2,1],
    [1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];

let world_2 =[
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1],
    [1,2,1,2,1,2,1,2,1,2,2,2,1,2,2,1,1,1,2,2,1,2,2,2,1,2,1,2,1,2,1,2,1],
    [1,2,1,2,2,2,1,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,1,2,2,2,1,2,1],
    [1,2,1,1,1,2,1,2,1,2,1,2,1,2,2,2,2,2,2,2,1,2,1,2,2,2,1,2,1,1,1,2,1],
    [1,2,2,2,2,2,1,2,2,2,1,2,2,2,1,1,2,1,1,2,2,2,1,2,2,2,1,2,2,2,2,2,1],
    [1,2,1,2,1,2,2,2,1,2,2,2,1,2,0,0,0,0,0,2,1,2,2,2,1,2,2,2,2,2,2,2,1],
    [1,2,1,2,1,2,2,2,1,1,1,1,1,2,0,0,0,0,0,2,1,2,2,2,2,2,2,2,2,2,2,2,1],
    [1,2,1,2,1,2,2,2,1,2,2,2,1,2,0,0,0,0,0,2,1,2,2,2,1,2,2,2,2,2,2,2,1],
    [1,2,2,2,2,2,1,2,2,2,1,2,2,2,1,1,2,1,1,2,2,2,1,2,2,2,1,2,2,2,2,2,1],
    [1,2,1,1,1,2,1,2,1,2,1,2,1,2,2,2,2,2,2,2,1,2,1,2,2,2,1,2,1,1,1,2,1],
    [1,2,1,2,2,2,1,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,1,2,2,2,2,2,1],
    [1,2,1,2,1,2,1,2,1,2,2,2,1,2,2,1,1,1,2,2,1,2,2,2,1,2,1,2,2,2,2,2,1],
    [1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];

let world_3 =[
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1],
    [1,2,2,2,1,2,1,2,1,2,2,2,1,2,2,2,1,1,1,2,1,2,2,2,1,2,1,2,1,2,1,2,1],
    [1,2,2,2,2,2,1,2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,1,2,2,2,1,2,1],
    [1,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,1,2,1,2,1,2,1,1,1,2,1],
    [1,2,2,2,2,2,1,2,2,2,1,2,2,2,0,0,0,0,1,2,2,2,1,2,2,2,1,2,2,2,2,2,1],
    [1,2,2,2,2,2,2,2,2,2,2,2,1,2,0,0,0,0,1,2,1,2,2,2,1,2,2,2,1,2,1,2,1],
    [1,2,2,2,2,2,2,2,2,1,1,1,1,2,0,0,0,0,2,2,1,1,1,1,1,2,2,2,1,2,1,2,1],
    [1,2,2,2,2,2,2,2,1,2,2,2,1,2,0,0,0,0,1,2,1,2,2,2,1,2,2,2,1,2,1,2,1],
    [1,2,2,2,2,2,1,2,2,2,1,2,2,2,1,0,1,1,1,2,2,2,1,2,2,2,1,2,2,2,2,2,1],
    [1,2,2,2,2,2,2,2,1,2,1,2,1,2,2,2,2,2,2,2,1,2,1,2,1,2,2,2,2,1,1,2,1],
    [1,2,2,2,2,2,1,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,1,2,2,2,1,2,1],
    [1,2,2,2,2,2,2,2,1,2,2,2,1,2,1,1,2,1,1,2,1,2,2,2,2,2,1,2,2,2,1,2,1],
    [1,2,2,2,2,2,2,2,1,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];

let world_4 =[
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,1,2,2,2,0,2,2,0,1],
    [1,2,1,2,1,2,1,2,1,2,2,2,1,2,0,0,0,0,0,2,1,2,2,2,1,2,0,2,1,2,1,0,1],
    [1,2,1,2,2,2,0,2,2,2,1,2,2,2,2,2,0,2,2,2,2,2,1,2,2,2,1,2,2,2,1,2,1],
    [1,2,0,0,0,2,1,2,1,2,1,2,1,2,2,2,2,2,2,2,1,2,1,2,1,2,1,2,1,1,1,2,1],
    [1,2,2,2,2,2,1,2,2,2,1,2,2,2,0,0,2,0,0,2,2,2,1,2,2,2,1,2,2,2,2,2,1],
    [1,2,1,2,1,2,2,2,1,2,2,2,1,2,0,0,0,0,0,2,1,2,2,2,1,2,2,2,1,2,1,2,1],
    [1,2,1,2,0,2,2,2,1,0,0,0,1,2,2,0,0,0,2,2,1,0,0,0,0,2,2,2,1,2,1,2,1],
    [1,2,1,2,1,2,2,2,1,2,2,2,1,2,0,0,0,0,0,2,1,2,2,2,1,2,2,2,1,2,1,2,1],
    [1,2,2,2,2,2,1,2,2,2,1,2,2,2,0,0,2,0,0,2,2,2,1,2,2,2,1,2,2,2,2,2,1],
    [1,2,1,1,1,2,1,2,1,2,1,2,1,2,2,2,2,2,2,2,1,2,1,2,1,2,1,2,1,0,1,2,1],
    [1,2,1,2,2,2,1,2,2,2,1,2,2,2,2,2,0,2,2,2,2,2,1,2,2,2,1,2,2,2,1,2,1],
    [1,2,1,2,0,2,1,2,1,2,2,2,0,2,0,0,0,0,0,2,0,2,2,2,0,2,1,2,1,2,1,2,1],
    [1,2,2,2,1,2,2,2,1,2,2,2,0,2,2,2,2,2,2,2,1,2,2,2,0,2,2,2,1,2,2,2,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];

let world_5 =[
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
    [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];
let world_6 = [
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,2,1,1,1,1,2,0,0,0,2,1,1,1,1,1,2,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,2,1,1,1,1,1,1,1,1,1,1,1,2,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];

let solarSystem = {
    1:world_1,
    2:world_2,
    3:world_3,
    4:world_4,
    5:world_5,
    6:world_6
}

let randomProperty = function (obj) {
    let keys = Object.keys(obj);
    // return obj[keys[ keys.length * Math.random() << 0]]; // << 0 (bitshift to the left by 0) a shorthand method of writing Math.round()
    let random = Math.round(keys.length * Math.random());
    if (random >= 6){
        random--;
    }
    return obj[keys[ random ]];
};
random_world = randomProperty(solarSystem);
// random_ghost_direction = ghostFirstDirection[Object.keys(ghostFirstDirection)[Math.floor(Object.keys(ghostFirstDirection).length * Math.random())]]; // shorthand method of the function


let x = 800;
let y = 350;
let score = 0;

let ghosts = {
    ghost1 : {
        x: 750,
        y: 300
        },
    ghost2 : {
        x: 850,
        y: 300
        },
    ghost3 : {
        x: 750,
        y: 400
        },
    ghost4 : {
        x: 850,
        y: 400
        },
}

let moves = 0;
let gameOver = false;

function displayWorld(){
    let htmlString="";
    for (let y=0; y<random_world.length; y++){
        htmlString += '<div class="row">'
        for(let x=0; x<random_world[y].length; x++){
            if(random_world[y][x] === 1){
                htmlString += '<div class="brick"></div>';
            } else if(random_world[y][x] === 2){
                htmlString += '<div class="coin"></div>';
            } else if(random_world[y][x] === 0){
                htmlString += '<div class="empty"></div>';
            } else if(random_world[y][x] === 3){
                htmlString += '<div class="fruit"></div>'
            }
        }
        htmlString += '</div>';
    }
    document.getElementById('world').innerHTML = htmlString;
}

document.onkeydown = function(event){
    // console.log(event);
    if(!gameOver){
        //left
        if(event.keyCode == 37 && random_world[y/50][(x/50)-1] !=1){
            document.getElementById("pacman").style.backgroundImage = "url('images/pacman-left.gif')";
            x -= 50;
            moves++;
            rollForFruit();
            moveGhosts();
        }

        //up
        else if( event.keyCode ==38 && random_world[(y/50)-1][x/50] !=1){
            document.getElementById("pacman").style.backgroundImage = "url('images/pacman-up.gif')";
            y -= 50;
            moves++;
            rollForFruit();
            moveGhosts();
        }

        //right
        else if( event.keyCode ==39 && random_world[y/50][(x/50)+1] !=1){
            document.getElementById("pacman").style.backgroundImage = "url('images/pacman-right.gif')";
            x += 50;
            moves++;
            rollForFruit();
            moveGhosts();
        }

        //down
        else if( event.keyCode ==40 && random_world[(y/50)+1][x/50] !=1){
            document.getElementById("pacman").style.backgroundImage = "url('images/pacman-down.gif')";
            y += 50;
            moves++;
            rollForFruit();
            moveGhosts();
        }

        document.getElementById('pacman').style.top = y+'px';
        document.getElementById('pacman').style.left = x+'px';
        checkColletibles();
        checkForGhosts();
    }
};

function checkColletibles(){
    let currentCoords = [x/50, y/50];
    if (random_world[y/50][x/50] === 2){
        random_world[y/50][x/50] = 0;
        score += 10;
        displayWorld();
        displayScore();
    } else if(random_world[y/50][x/50] === 3){
        random_world[y/50][x/50] = 0;
        score += 20;
        displayWorld();
        displayScore();
    }
}

function displayScore(){
    document.getElementById('score').innerText = "Score: "+ score;
}

function rollForFruit(){
    if(moves > 10 && moves%5 === 0){
        let randY = Math.floor(Math.random()*(random_world.length-1));
        let randX = Math.floor(Math.random()*(random_world[randY].length-1));
        // console.log(randY);
        // console.log(randX);
        if(random_world[randY][randX] === 0 ){
            random_world[randY][randX] = 3;
        }
    }
}

function moveGhosts(){
    if(moves>3){
        for(let gh in ghosts){
            let direction = Math.floor(Math.random()*4)+1;

            //this could be combined with player movement with some effort
            //left
            if(direction === 1 && random_world[ghosts[gh].y/50][(ghosts[gh].x/50)-1] !==1){
                ghosts[gh].x -= 50;
            }

            //up
            else if(direction === 2 && random_world[(ghosts[gh].y/50)-1][ghosts[gh].x/50] !==1){
                ghosts[gh].y -= 50;
            }

            //right
            else if(direction === 3 && random_world[ghosts[gh].y/50][(ghosts[gh].x/50)+1] !==1){
                ghosts[gh].x += 50;
            }

            //down
            else if(direction === 4 && random_world[(ghosts[gh].y/50)+1][ghosts[gh].x/50] !==1){
                ghosts[gh].y += 50;
            }

            document.getElementById(gh).style.top = ghosts[gh].y+'px';
            document.getElementById(gh).style.left = ghosts[gh].x+'px';
        }
    }
}

function checkForGhosts(){
    for(let gh in ghosts){
        if(ghosts[gh].x === x && ghosts[gh].y ===y){
            gameOver = true;
            alert('Game Over');
        }
    }
}

displayWorld();



//****build a world
//*****put pacman on board
//*****move pacman
//****eat coins
//add fruit
//randomly generate board
